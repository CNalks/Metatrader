# 疾控周报速递小程序

## 项目概述

疾控周报速递是一款微信小程序，旨在自动获取、处理和展示中国疾病预防控制中心（China CDC）发布的《China CDC Weekly》（疾控周报）内容。该小程序通过后台系统自动从指定QQ邮箱中提取周报邮件，解析内容，使用AI生成摘要和亮点，并以清晰、便捷的形式呈现给用户。

## 系统架构

项目分为两大部分：

1. **后台服务**：负责邮件获取、内容解析、AI分析和数据存储
2. **小程序前端**：负责用户界面展示和交互

### 后台服务架构

- **邮件获取模块**：使用IMAP/POP3协议访问QQ邮箱，获取China CDC Weekly邮件
- **内容解析模块**：解析邮件内容，提取周报期号、日期、文章列表和原文链接
- **内容抓取模块**：访问原文链接，抓取文章详细内容
- **AI分析模块**：调用大语言模型API，生成文章摘要和亮点
- **数据存储模块**：将处理后的数据存入数据库
- **API服务模块**：为小程序前端提供数据接口
- **监控告警模块**：监控系统运行状态，及时发现并处理异常

### 小程序前端架构

- **首页/周报列表页**：展示已处理的周报列表
- **周报详情页**：展示特定期周报的文章列表
- **文章详情页**：展示文章标题、作者、摘要、亮点和原文链接
- **搜索功能**：支持按关键词搜索文章
- **收藏功能**：支持用户收藏感兴趣的文章
- **分享功能**：支持分享文章或整期周报

## 技术栈

- **前端**：微信小程序原生开发
- **后端**：Node.js
- **数据库**：MongoDB
- **邮件访问**：node-imap库
- **内容提取**：cheerio库
- **AI分析**：OpenAI API
- **部署**：云函数

## 项目结构

```
CDCWeekly/
├── backend/                 # 后台服务
│   ├── config/             # 配置文件
│   ├── controllers/        # 控制器
│   ├── models/             # 数据模型
│   ├── services/           # 服务层
│   │   ├── email/          # 邮件服务
│   │   ├── parser/         # 解析服务
│   │   ├── scraper/        # 抓取服务
│   │   ├── ai/             # AI分析服务
│   │   └── api/            # API服务
│   ├── utils/              # 工具函数
│   ├── app.js              # 应用入口
│   └── package.json        # 依赖配置
└── frontend/               # 小程序前端
    ├── pages/              # 页面
    │   ├── index/          # 首页/周报列表
    │   ├── weekly/         # 周报详情
    │   ├── article/        # 文章详情
    │   ├── search/         # 搜索页面
    │   └── favorite/       # 收藏页面
    ├── components/         # 组件
    ├── utils/              # 工具函数
    ├── app.js              # 小程序入口
    ├── app.json            # 小程序配置
    └── project.config.json # 项目配置
```

## 功能实现计划

### 第一阶段：后台基础架构

1. 搭建Node.js项目框架
2. 实现邮箱访问配置和邮件获取功能
3. 实现邮件内容解析功能
4. 设计并创建数据库模型

### 第二阶段：内容处理与AI分析

1. 实现文章原文抓取功能
2. 集成AI模型，实现摘要和亮点生成
3. 完善数据存储和管理
4. 开发API接口

### 第三阶段：小程序前端开发

1. 创建小程序项目
2. 实现首页/周报列表页
3. 实现周报详情页和文章详情页
4. 实现搜索功能

### 第四阶段：功能完善与优化

1. 实现收藏和分享功能
2. 添加异常监控与告警
3. 优化用户界面和体验
4. 进行测试和bug修复

## 安全考量

1. 邮箱访问凭证安全存储
2. HTTPS通信加密
3. 数据库访问权限控制
4. 输入验证和防注入处理

## 部署与维护

1. 后台服务部署到云函数
2. 数据库部署到云数据库
3. 小程序发布到微信平台
4. 监控系统运行状态
5. 定期备份数据